/*! crm-sdk 1.3.2 | (c) Dynamics Software | MIT license - https://github.com/dys-solutions/crm-sdk/blob/develop/LICENSE */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("CRMSDK.noBabelPolyflll",[],t):"object"==typeof exports?exports["CRMSDK.noBabelPolyflll"]=t():e["CRMSDK.noBabelPolyflll"]=t()}(this,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=321)}({128:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(97);Object.defineProperty(t,"Entity",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var i=r(130);Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var o=r(131);Object.defineProperty(t,"Systemuser",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(18);Object.defineProperty(t,"WebAPI",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}})},130:function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(98),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(e){function Account(){return _classCallCheck(this,Account),_possibleConstructorReturn(this,(Account.__proto__||Object.getPrototypeOf(Account)).apply(this,arguments))}return _inherits(Account,e),n(Account,null,[{key:"getActiveAccounts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filters||(e.filters=[]),e.filters.push(this.activeFilter),this.query(e)}},{key:"logicalName",get:function(){return"account"}},{key:"activeFilter",get:function(){return{type:"and",conditions:[{attribute:"statecode",value:0}]}}}]),Account}(o.default);t.default=a},131:function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(98),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(e){function Systemuser(){return _classCallCheck(this,Systemuser),_possibleConstructorReturn(this,(Systemuser.__proto__||Object.getPrototypeOf(Systemuser)).apply(this,arguments))}return _inherits(Systemuser,e),n(Systemuser,null,[{key:"getCurrent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filters||(e.filters=[]),e.filters.push(this.currentFilter),this.get(null,e)}},{key:"logicalName",get:function(){return"systemuser"}},{key:"currentFilter",get:function(){return{type:"and",conditions:[{attribute:"systemuserid",value:this.userId}]}}},{key:"userId",get:function(){var e=window.Xrm.Page.context.getUserId();return e.slice(1,e.length-1)}}]),Systemuser}(o.default);t.default=a},132:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"getQueryAttributes",value:function(){function getQueryAttributes(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,r,n,i,o,a,u,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.logicalName;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e=this.extractQueryAttributes(s),0!==e.length){l.next=24;break}return l.next=4,this.getEntityAttributes(c);case 4:for(t=l.sent,r=!0,n=!1,i=void 0,l.prev=8,o=Object.keys(t)[Symbol.iterator]();!(r=(a=o.next()).done);r=!0)u=a.value,e.push(u);l.next=16;break;case 12:l.prev=12,l.t0=l.catch(8),n=!0,i=l.t0;case 16:l.prev=16,l.prev=17,!r&&o.return&&o.return();case 19:if(l.prev=19,!n){l.next=22;break}throw i;case 22:return l.finish(19);case 23:return l.finish(16);case 24:return l.abrupt("return",e);case 25:case"end":return l.stop()}},_callee,this,[[8,12,16,24],[17,,19,23]])}));return getQueryAttributes}()},{key:"extractQueryAttributes",value:function(e){var t=e.select,r=e.expand,n=void 0===r?[]:r,i=t?t.slice():[],o=!0,a=!1,u=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;"string"==typeof l?i.push(l):i.push(l.attribute)}}catch(e){a=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw u}}return i}},{key:"parseResult",value:function(){function parseResult(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,r,n,i,o,a,u,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=arguments[1],l=arguments[2];return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:e=[],t=!0,r=!1,n=void 0,f.prev=4,i=s[Symbol.iterator]();case 6:if(t=(o=i.next()).done){f.next=15;break}return a=o.value,u=new this(a,c),f.next=11,this.addDescriptors(u,l,c);case 11:e.push(u);case 12:t=!0,f.next=6;break;case 15:f.next=21;break;case 17:f.prev=17,f.t0=f.catch(4),r=!0,n=f.t0;case 21:f.prev=21,f.prev=22,!t&&i.return&&i.return();case 24:if(f.prev=24,!r){f.next=27;break}throw n;case 27:return f.finish(24);case 28:return f.finish(21);case 29:return f.abrupt("return",e);case 30:case"end":return f.stop()}},_callee2,this,[[4,17,21,29],[22,,24,28]])}));return parseResult}()},{key:"addDescriptors",value:function(){function addDescriptors(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,r,n,i,o,a,u,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments[2];return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=!0,r=!1,n=void 0,l.prev=3,i=s[Symbol.iterator]();case 5:if(t=(o=i.next()).done){l.next=14;break}return a=o.value,l.next=9,this.getDescriptor(a,c);case 9:u=l.sent,Object.defineProperty(e,a,u);case 11:t=!0,l.next=5;break;case 14:l.next=20;break;case 16:l.prev=16,l.t0=l.catch(3),r=!0,n=l.t0;case 20:l.prev=20,l.prev=21,!t&&i.return&&i.return();case 23:if(l.prev=23,!r){l.next=26;break}throw n;case 26:return l.finish(23);case 27:return l.finish(20);case 28:case"end":return l.stop()}},_callee3,this,[[3,16,20,28],[21,,23,27]])}));return addDescriptors}()},{key:"getDescriptor",value:function(){function getDescriptor(t,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e,t){var r,n,i,o,a;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=this.getPropertyDescriptor(e),n=null,i=null,u.next=4,this.getEntityAttributes(t);case 4:if(o=u.sent,a=o[e],"Lookup"!==a.AttributeType){u.next=10;break}return u.next=9,this.getNavigationProperty(e,t);case 9:i=u.sent;case 10:return r&&r.get&&r.set||(n={}),r&&r.get||(n.get=function(){return this.getAttribute(e,i)}),r&&r.set||(n.set=function(t){this.setAttribute(e,t)}),u.abrupt("return",n);case 14:case"end":return u.stop()}},_callee4,this)}));return getDescriptor}()},{key:"getPropertyDescriptor",value:function(e){var t=Object.getOwnPropertyDescriptor(this.prototype,e),r=void 0;for(t||(r=Object.getPrototypeOf(this.prototype));!t&&r;)t=Object.getOwnPropertyDescriptor(r,e),r=Object.getPrototypeOf(r);return t}}]),_class}(e)};t.default=i},133:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(41),o=_interopRequireDefault(i),a=r(18),u=_interopRequireDefault(a),s=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,[{key:"create",value:function(){function create(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getClass().create(this.logicalName,this.data));case 1:case"end":return e.stop()}},_callee,this)}));return create}()}],[{key:"create",value:function(){function create(t,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var r,n,i,a,s,c,l,f;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,o.default.getEntityDefinitions(e);case 2:return r=p.sent,n=[],console.log("Create "+e),p.next=7,u.default.createEntity(e,t);case 7:for(t[r.PrimaryIdAttribute]=p.sent,i=!0,a=!1,s=void 0,p.prev=11,c=Object.keys(t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)f=l.value,n.push(f);p.next=19;break;case 15:p.prev=15,p.t0=p.catch(11),a=!0,s=p.t0;case 19:p.prev=19,p.prev=20,!i&&c.return&&c.return();case 22:if(p.prev=22,!a){p.next=25;break}throw s;case 25:return p.finish(22);case 26:return p.finish(19);case 27:return p.abrupt("return",this.parseResult([t],e,n)[0]);case 28:case"end":return p.stop()}},_callee2,this,[[11,15,19,27],[20,,22,26]])}));return create}()}]),_class}(e)};t.default=s},134:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(18),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,[{key:"delete",value:function(){function _delete(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getPrimaryId();case 2:return e=r.sent,t=this.logicalName,console.log("Delete "+t+" ("+e+")"),r.abrupt("return",o.default.deleteEntity(t,e));case 6:case"end":return r.stop()}},_callee,this)}));return _delete}()}]),_class}(e)};t.default=a},135:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(18),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"fetch",value:function(){function fetch(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName,n=arguments[1];return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("Fetch "+r+" "+n),i.next=3,o.default.executeFetchXml(r,n);case 3:return e=i.sent,i.next=6,this.getQueryAttributes(void 0,r);case 6:return t=i.sent,i.abrupt("return",this.parseResult(e.value,r,t));case 8:case"end":return i.stop()}},_callee,this)}));return fetch}()}]),_class}(e)};t.default=a},136:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(41),o=_interopRequireDefault(i),a=r(18),u=_interopRequireDefault(a),s=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"get",value:function(){function get(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName,i=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.getQueryOptions(o,n);case 2:return e=a.sent,i&&o.filters&&console.log("Get by 'id' does negate filters on query"),console.log("Get "+n+" ("+i+") "+e),a.next=7,u.default.retrieveEntity(n,i,e);case 7:return t=a.sent,a.next=10,this.getQueryAttributes(o,n);case 10:return r=a.sent,a.abrupt("return",this.parseResult(t.value?t.value:[t],n,r)[0]);case 12:case"end":return a.stop()}},_callee,this)}));return get}()},{key:"count",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName;return u.default.count(e)}},{key:"query",value:function(){function query(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getQueryOptions(i,n);case 2:return e=o.sent,console.log("Query "+n),o.next=6,u.default.retrieveMultiple(n,e,this.getHeaders(i));case 6:return t=o.sent,o.next=9,this.getQueryAttributes(i,n);case 9:return r=o.sent,o.abrupt("return",this.parseResult(t.value,n,r));case 11:case"end":return o.stop()}},_callee2,this)}));return query}()},{key:"getHeaders",value:function(e){var t={};return e.maxpagesize&&(t.Prefer="odata.maxpagesize="+e.maxpagesize),t}},{key:"rewriteFilters",value:function(e){var t={type:"and",conditions:[]};e.filters||(e.filters=[]);var r=!0,n=!1,i=void 0;try{for(var o,a=Object.keys(e)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;this.queryElements.includes(u)||t.conditions.push({attribute:u.toLowerCase(),operator:"eq",value:e[u]})}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}t.conditions.length>0&&e.filters.push(t)}},{key:"rewriteSelect",value:function(){function rewriteSelect(t,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e,t){var r,n,i,a,u,s,c,l,f,p,y,h;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!e.select){_.next=42;break}return _.next=3,this.getEntityAttributes(t);case 3:r=_.sent,n=e.select.slice(),i=!0,a=!1,u=void 0,_.prev=8,s=n[Symbol.iterator]();case 10:if(i=(c=s.next()).done){_.next=28;break}if(l=c.value,f=r[l],p=f&&f.AttributeType,"Lookup"!==p){_.next=23;break}return _.next=16,o.default.getEntityDefinitions(f.Targets[0]);case 16:y=_.sent,h=e.select.indexOf(l),e.select.splice(h,1),e.expand||(e.expand=[]),e.expand.push({attribute:l,select:[y.PrimaryIdAttribute,y.PrimaryNameAttribute]}),_.next=25;break;case 23:if(p){_.next=25;break}throw"Unexisting select field found: "+l;case 25:i=!0,_.next=10;break;case 28:_.next=34;break;case 30:_.prev=30,_.t0=_.catch(8),a=!0,u=_.t0;case 34:_.prev=34,_.prev=35,!i&&s.return&&s.return();case 37:if(_.prev=37,!a){_.next=40;break}throw u;case 40:return _.finish(37);case 41:return _.finish(34);case 42:case"end":return _.stop()}},_callee3,this,[[8,30,34,42],[35,,37,41]])}));return rewriteSelect}()},{key:"getQueryOptions",value:function(){function getQueryOptions(t,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e,t){var r,n,i,o,a,u,s,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"&";return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.rewriteFilters(e),l.next=3,this.rewriteSelect(e,t);case 3:return r=[],n=this.parseSelect(e.select),l.next=7,this.parseFilters(e.filters,t);case 7:return i=l.sent,l.next=10,this.parseExpand(e.expand,t);case 10:return o=l.sent,a=this.parseOrders(e.orders),u=this.parseTop(e.top),s=this.parseCount(e.count),i&&r.push(i),n&&r.push(n),o&&r.push(o),a&&r.push(a),u&&r.push(u),s&&r.push(s),l.abrupt("return",r.join(c));case 21:case"end":return l.stop()}},_callee4,this)}));return getQueryOptions}()},{key:"parseExpand",value:function(){function parseExpand(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var e,t,r,n,i,o,a,u,s,c,l,f,p,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],h=arguments[1];return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(e=null,!(y.length>0)){_.next=59;break}t="",r=!0,n=!1,i=void 0,_.prev=6,o=y[Symbol.iterator]();case 8:if(r=(a=o.next()).done){_.next=44;break}if(u=a.value,""!==t&&(t+=","),"string"!=typeof u){_.next=24;break}return _.prev=12,_.next=15,this.getNavigationProperty(u,h);case 15:s=_.sent,t+=""+s,_.next=22;break;case 19:throw _.prev=19,_.t0=_.catch(12),_.t0;case 22:_.next=41;break;case 24:return _.prev=24,c=u.attribute,_.next=28,this.getNavigationProperty(c,h);case 28:return l=_.sent,_.next=31,this.getEntityAttributes(h);case 31:return f=_.sent,_.next=34,this.getQueryOptions(u,f[c].Targets[0],";");case 34:p=_.sent,t+=l+"("+p+")",_.next=41;break;case 38:throw _.prev=38,_.t1=_.catch(24),_.t1;case 41:r=!0,_.next=8;break;case 44:_.next=50;break;case 46:_.prev=46,_.t2=_.catch(6),n=!0,i=_.t2;case 50:_.prev=50,_.prev=51,!r&&o.return&&o.return();case 53:if(_.prev=53,!n){_.next=56;break}throw i;case 56:return _.finish(53);case 57:return _.finish(50);case 58:e="$expand="+t;case 59:return _.abrupt("return",e);case 60:case"end":return _.stop()}},_callee5,this,[[6,46,50,58],[12,19],[24,38],[51,,53,57]])}));return parseExpand}()},{key:"getNavigationProperty",value:function(){function getNavigationProperty(t,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(e,t){var r,n,i,a,u,s,c,l,f,p;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,o.default.getEntityDefinitionManyToOneRelationships(t);case 2:r=y.sent,n=!0,i=!1,a=void 0,y.prev=6,u=r.value[Symbol.iterator]();case 8:if(n=(s=u.next()).done){y.next=15;break}if(c=s.value,l=c.ReferencingAttribute,f=c.ReferencingEntity,p=c.ReferencingEntityNavigationPropertyName,l!==e||f!==t){y.next=12;break}return y.abrupt("return",p);case 12:n=!0,y.next=8;break;case 15:y.next=21;break;case 17:y.prev=17,y.t0=y.catch(6),i=!0,a=y.t0;case 21:y.prev=21,y.prev=22,!n&&u.return&&u.return();case 24:if(y.prev=24,!i){y.next=27;break}throw a;case 27:return y.finish(24);case 28:return y.finish(21);case 29:throw new Error("No navigation property '"+e+"' for entity '"+t+"'");case 30:case"end":return y.stop()}},_callee6,this,[[6,17,21,29],[22,,24,28]])}));return getNavigationProperty}()},{key:"parseSelect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=null;if(e.length>0){var r="",n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;""!==r&&(r+=","),r+=""+s}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}t="$select="+r}return t}},{key:"parseFilters",value:function(){function parseFilters(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var e,t,r,n,i,o,a,u,s,c,l,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],p=arguments[1];return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(e=null,!(f.length>0)){y.next=39;break}t=[],r=!0,n=!1,i=void 0,y.prev=6,o=f[Symbol.iterator]();case 8:if(r=(a=o.next()).done){y.next=24;break}return u=a.value,s=u.type,c=u.conditions,y.t0=t,y.next=14,this.parseConditions(c,s,p);case 14:if(y.t1=y.sent,y.t0.push.call(y.t0,y.t1),!u.filters){y.next=21;break}return y.next=19,this.parseFilters(u.filters,p);case 19:l=y.sent,t.push(l.substring(8));case 21:r=!0,y.next=8;break;case 24:y.next=30;break;case 26:y.prev=26,y.t2=y.catch(6),n=!0,i=y.t2;case 30:y.prev=30,y.prev=31,!r&&o.return&&o.return();case 33:if(y.prev=33,!n){y.next=36;break}throw i;case 36:return y.finish(33);case 37:return y.finish(30);case 38:e="$filter="+t.join("and");case 39:return y.abrupt("return",e);case 40:case"end":return y.stop()}},_callee7,this,[[6,26,30,38],[31,,33,37]])}));return parseFilters}()},{key:"parseConditions",value:function(){function parseConditions(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var e,t,r,n,i,o,a,u,s,c,l,f,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and",h=arguments[2];return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return e="",_.next=3,this.getEntityAttributes(h);case 3:for(t=_.sent,r=!0,n=!1,i=void 0,_.prev=7,o=p[Symbol.iterator]();!(r=(a=o.next()).done);r=!0)u=a.value,s=u.operator,c=u.value,l=u.attribute,f=t[l].AttributeType,s=s||"eq",c="String"===f?"'"+c+"'":""+c,""!==e&&(e+=" "+y+" "),e+=l+" "+s+" "+c;_.next=15;break;case 11:_.prev=11,_.t0=_.catch(7),n=!0,i=_.t0;case 15:_.prev=15,_.prev=16,!r&&o.return&&o.return();case 18:if(_.prev=18,!n){_.next=21;break}throw i;case 21:return _.finish(18);case 22:return _.finish(15);case 23:return _.abrupt("return","("+e+")");case 24:case"end":return _.stop()}},_callee8,this,[[7,11,15,23],[16,,18,22]])}));return parseConditions}()},{key:"parseOrders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=null;if(e.length>0){var r="",n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value,c=s.attribute,l=s.descending,f=l?"desc":"asc";""!==r&&(r+=","),r+=c+" "+f}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}t="$orderby="+r}return t}},{key:"parseTop",value:function(e){var t=null;return e&&(t="$top="+e),t}},{key:"parseCount",value:function(e){var t=null;return!0===e&&(t="$count="+e),t}},{key:"queryElements",get:function(){return["attribute","filters","select","expand","orders","maxpagesize","top","count"]}}]),_class}(e)};t.default=s},137:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(18),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,[{key:"save",value:function(){function save(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isNew){e.next=4;break}return e.abrupt("return",this.create());case 4:if(0===Object.keys(this.changes).length){e.next=6;break}return e.abrupt("return",this.update());case 6:case"end":return e.stop()}},_callee,this)}));return save}()},{key:"update",value:function(){function update(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.changes,n.next=3,this.getPrimaryId();case 3:return t=n.sent,r=this.logicalName,console.log("Update "+r+" ("+t+")"),n.next=8,o.default.updateEntity(r,t,e);case 8:this.changes=null;case 9:case"end":return n.stop()}},_callee2,this)}));return update}()}]),_class}(e)};t.default=a},18:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WebAPI=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),a=r(63),u=_interopRequireDefault(a),s=r(64),c=_interopRequireDefault(s),l=r(50),f=_interopRequireDefault(l),p=r(65),y=_interopRequireDefault(p),h=r(66),_=_interopRequireDefault(h),d=r(67),b=_interopRequireDefault(d),v=r(41),g=_interopRequireDefault(v),m=r(68),w=_interopRequireDefault(m),x=r(69),k=_interopRequireDefault(x),P=r(70),O=_interopRequireDefault(P);void 0===window.Xrm&&void 0!==window.parent.Xrm&&(window.Xrm=window.parent.Xrm);var R=function(e){function WebAPI(){return _classCallCheck(this,WebAPI),_possibleConstructorReturn(this,(WebAPI.__proto__||Object.getPrototypeOf(WebAPI)).apply(this,arguments))}return _inherits(WebAPI,e),o(WebAPI,null,[{key:"getEntityDefinitions",value:function(e){return g.default.getEntityDefinitions(e)}},{key:"getEntitySetName",value:function(){function getEntitySetName(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getEntityDefinitions(e);case 2:return t=r.sent,r.abrupt("return",t.EntitySetName);case 4:case"end":return r.stop()}},_callee,this)}));return getEntitySetName}()},{key:"retrieveEntitySetProperty",value:function(){function retrieveEntitySetProperty(t,r,n,i){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t,r,n){var i,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=WebAPI.buildQueryString(n),o=WebAPI.parseEntityId(t),a.abrupt("return",WebAPI.requestAndReturnBody("GET",e+"("+o+")/"+r+i));case 2:case"end":return a.stop()}},_callee2,this)}));return retrieveEntitySetProperty}()},{key:"parseEntityId",value:function(e){var t=e;if("object"===(void 0===e?"undefined":i(e))){var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(n+"='"+e[n]+"'");t=r.join(",")}else e.startsWith("{")&&e.endsWith("}")&&(t=t.substr(1,t.length-2));return t}},{key:"buildQueryString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if("string"==typeof e)t.push(e);else{if(e.select){var r=void 0;r="object"===i(e.select)?e.select.join(","):e.select,t.push("$select="+r)}e.top&&t.push("$top="+e.top),e.count&&t.push("$count="+e.count)}return t.length?"?"+t.join("&"):""}},{key:"context",get:function(){if(void 0!==window.Xrm)return window.Xrm.Page.context;if(void 0!==window.GetGlobalContext)return window.GetGlobalContext();throw new Error("Context is not available.")}},{key:"webAPIPath",get:function(){return this.context.getClientUrl()+"/api/data/"+this.version}},{key:"version",get:function(){return this.api||(this.version=window.Xrm.Page.context.getVersion().substr(0,3)),this.api},set:function(e){e.startsWith("v")||(e="v"+e),this.api=e}}]),WebAPI}((0,u.default)((0,c.default)((0,y.default)((0,_.default)((0,b.default)((0,w.default)((0,k.default)((0,O.default)(f.default)))))))));t.WebAPI=R,t.default=R,void 0!==(n=function(){return R}.call(t,r,t,e))&&(e.exports=n)},321:function(e,t,r){e.exports=r(128)},41:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(18),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function Metadata(){_classCallCheck(this,Metadata)}return n(Metadata,null,[{key:"getEntityDefinitions",value:function(){function getEntityDefinitions(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.cachedEntityDefinitions[e]){r.next=2;break}return r.abrupt("return",Promise.resolve(this.cachedEntityDefinitions[e]));case 2:if("string"==typeof e){r.next=4;break}throw Error("Invalid logicalName given");case 4:return r.next=6,o.default.retrieveEntitySet("EntityDefinitions",{LogicalName:e});case 6:return t=r.sent,this.cachedEntityDefinitions[e]=t,r.abrupt("return",t);case 9:case"end":return r.stop()}},_callee,this)}));return getEntityDefinitions}()},{key:"getCachedEntityDefinitions",value:function(e){return this.cachedEntityDefinitions[e]}},{key:"getEntityDefinitionAttributes",value:function(){function getEntityDefinitionAttributes(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.cachedEntityDefinitionAttributes[e]){r.next=2;break}return r.abrupt("return",Promise.resolve(this.cachedEntityDefinitionAttributes[e]));case 2:return r.next=4,o.default.retrieveEntitySetProperty("EntityDefinitions",{LogicalName:e},"Attributes");case 4:return t=r.sent,this.cachedEntityDefinitionAttributes[e]=t,r.abrupt("return",t);case 7:case"end":return r.stop()}},_callee2,this)}));return getEntityDefinitionAttributes}()},{key:"getEntityDefinitionManyToOneRelationships",value:function(){function getEntityDefinitionManyToOneRelationships(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.cachedEntityDefinitionsManyToOneRelationships[e]){r.next=2;break}return r.abrupt("return",Promise.resolve(this.cachedEntityDefinitionsManyToOneRelationships[e]));case 2:return r.next=4,o.default.retrieveEntitySetProperty("EntityDefinitions",{LogicalName:e},"ManyToOneRelationships");case 4:return t=r.sent,this.cachedEntityDefinitionsManyToOneRelationships[e]=t,r.abrupt("return",t);case 7:case"end":return r.stop()}},_callee3,this)}));return getEntityDefinitionManyToOneRelationships}()},{key:"cachedEntityDefinitions",get:function(){return this.entityDef||(this.entityDef={}),this.entityDef}},{key:"cachedEntityDefinitionAttributes",get:function(){return this.entityDefAttributes||(this.entityDefAttributes={}),this.entityDefAttributes}},{key:"cachedEntityDefinitionsManyToOneRelationships",get:function(){return this.entityDefManyToOneRelationships||(this.entityDefManyToOneRelationships={}),this.entityDefManyToOneRelationships}}]),Metadata}();t.default=a},50:function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(){function Class(){_classCallCheck(this,Class)}return n(Class,[{key:"getClass",value:function(){return Object.getPrototypeOf(this).constructor}}]),Class}();t.default=i},62:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["DELETE","GET","PATCH","POST","PUT"],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(function(o,u){var s=new XMLHttpRequest;if(-1===n.indexOf(t))throw new Error("Request method must be one of the following: "+n.join(", "));s.open(t,encodeURI(e),!0),s.setRequestHeader("OData-MaxVersion","4.0"),s.setRequestHeader("OData-Version","4.0"),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-Type","application/json; charset=utf-8");for(var c in i)s.setRequestHeader(c,i[c]);s.onreadystatechange=function(){if(4===s.readyState){s.onreadystatechange=null;try{var e=a(s);o(e)}catch(e){u(e)}}},s.send(JSON.stringify(r))})},o=function(e,t){if("string"==typeof t){var r=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?::(\d*))?Z$/.exec(t);if(r)return new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6],+r[7]||0))}return t},a=function(e){var t={200:function(){var t=null;try{t=JSON.parse(e.response,o)}catch(e){throw new Error("JSON response can't be parsed")}return{body:t,getResponseHeader:e.getResponseHeader.bind(e),statusCode:e.status}},204:function(){return{body:null,getResponseHeader:e.getResponseHeader.bind(e),statusCode:e.status}}},r=t[e.status];if(r)return r();throw new Error("Unexpected Error")};t.default=i},63:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"executeAction",value:function(){function executeAction(t,r,n,i){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t,r,n){var i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}return e.abrupt("return",this.executeBoundAction.apply(this,i));case 4:return e.abrupt("return",this.executeUnboundAction.apply(this,i));case 5:case"end":return e.stop()}},_callee,this)}));return executeAction}()},{key:"executeBoundAction",value:function(){function executeBoundAction(t,r,n,i){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t,r,n){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getEntitySetName(r);case 2:return i=o.sent,o.abrupt("return",this.requestAndReturnBody("POST",i+"("+n+")/Microsoft.Dynamics.CRM."+e,t));case 4:case"end":return o.stop()}},_callee2,this)}));return executeBoundAction}()},{key:"executeUnboundAction",value:function(e,t){return this.requestAndReturnBody("POST",""+e,t)}}]),_class}(e)};t.default=i},64:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"associateEntities",value:function(){function associateEntities(t,r,n,i,o){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t,r,n,i){var o,a,u;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.getEntitySetName(e);case 2:return o=s.sent,a=this.webAPIPath,u={"@odata.id":a+"/"+n+"("+i+")"},s.abrupt("return",this.requestAndReturnBody("POST",o+"("+t+")/"+r+"/$ref",u));case 6:case"end":return s.stop()}},_callee,this)}));return associateEntities}()},{key:"disassociateEntities",value:function(){function disassociateEntities(t,r,n,i){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t,r,n){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getEntitySetName(e);case 2:return i=o.sent,o.abrupt("return",this.requestAndReturnBody("DELETE",i+"("+t+")/"+r+"("+n+")/$ref"));case 4:case"end":return o.stop()}},_callee2,this)}));return disassociateEntities}()}]),_class}(e)};t.default=i},65:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"createEntity",value:function(){function createEntity(t,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r,n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getEntitySetName(e);case 2:return r=i.sent,i.next=5,this.requestAndReturnHeader("POST",r,t,"OData-EntityId");case 5:if(!(n=i.sent)){i.next=8;break}return i.abrupt("return",this.getEntityIdFromHeader(n));case 8:case"end":return i.stop()}},_callee,this)}));return createEntity}()},{key:"getEntityIdFromHeader",value:function(e){return/\(([^)]+)\)/.exec(e)[1]}}]),_class}(e)};t.default=i},66:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"deleteEntity",value:function(){function deleteEntity(t,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getEntitySetName(e);case 2:return r=n.sent,n.abrupt("return",this.request("DELETE",r+"("+t+")"));case 4:case"end":return n.stop()}},_callee,this)}));return deleteEntity}()}]),_class}(e)};t.default=i},67:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"executeFunction",value:function(e,t,r){return t?this.executeBoundFunction.apply(this,arguments):this.executeUnboundFunction.apply(this,arguments)}},{key:"executeBoundFunction",value:function(){function executeBoundFunction(t,r,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t,r){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getEntitySetName(t);case 2:return n=i.sent,i.abrupt("return",this.requestAndReturnBody("GET",n+"("+r+")/Microsoft.Dynamics.CRM."+e));case 4:case"end":return i.stop()}},_callee,this)}));return executeBoundFunction}()},{key:"executeUnboundFunction",value:function(e){return this.requestAndReturnBody("GET",""+e)}}]),_class}(e)};t.default=i},68:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"retrieveEntity",value:function(){function retrieveEntity(t,r,n,i){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t,r,n){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getEntitySetName(e);case 2:return i=o.sent,o.abrupt("return",this.retrieveEntitySet(i,t,r,n));case 4:case"end":return o.stop()}},_callee,this)}));return retrieveEntity}()},{key:"retrieveEntitySet",value:function(e,t,r,n){var i=this.buildQueryString(r),o=t?this.parseEntityId(t):null,a=""+e;return o&&(a+="("+o+")"),a+=""+i,this.requestAndReturnBody("GET",a,null,n)}},{key:"retrieveMultiple",value:function(){function retrieveMultiple(t,r,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e,t,r){var n,i,o=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.getEntitySetName(e);case 2:return n=a.sent,i=this.buildQueryString(t),a.abrupt("return",this.requestAndReturnBody("GET",""+n+i,null,r).then(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=r&&r.Prefer&&r.Prefer.includes("odata.maxpagesize"),!e["@odata.nextLink"]||t){i.next=7;break}return i.next=4,o.requestNextLinks(e["@odata.nextLink"]);case 4:n=i.sent,e.value=e.value.concat(n),delete e["@odata.nextLink"];case 7:return i.abrupt("return",e);case 8:case"end":return i.stop()}},_callee2,o)}));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return a.stop()}},_callee3,this)}));return retrieveMultiple}()},{key:"requestNextLinks",value:function(e){var t=this,r=[];return this.requestAndReturnBody("GET",decodeURI(e)).then(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.value,!e["@odata.nextLink"]){n.next=7;break}return n.t0=r,n.next=5,t.requestNextLinks(e["@odata.nextLink"]);case 5:n.t1=n.sent,r=n.t0.concat.call(n.t0,n.t1);case 7:return n.abrupt("return",r);case 8:case"end":return n.stop()}},_callee4,t)}));return function(t){return e.apply(this,arguments)}}())}},{key:"executeFetchXml",value:function(){function executeFetchXml(t,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(e,t){var r,n=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getEntitySetName(e);case 2:return r=i.sent,i.abrupt("return",this.requestAndReturnBody("GET",r+"?fetchXml="+t).then(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e["@odata.nextLink"]){r.next=6;break}return r.next=3,n.requestNextLinks(e["@odata.nextLink"]);case 3:t=r.sent,e.value=e.value.concat(t),delete e["@odata.nextLink"];case 6:return r.abrupt("return",e);case 7:case"end":return r.stop()}},_callee5,n)}));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return i.stop()}},_callee6,this)}));return executeFetchXml}()},{key:"count",value:function(){function count(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getEntitySetName(e);case 2:return t=n.sent,n.next=5,this.requestAndReturnBody("GET",t+"/$count");case 5:return r=n.sent,n.abrupt("return",r);case 7:case"end":return n.stop()}},_callee7,this)}));return count}()}]),_class}(e)};t.default=i},69:function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(62),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"request",value:function(e,t,r,n){var i=this.webAPIPath,a=void 0;return a=0===t.indexOf("http")?t:i+"/"+t,(0,o.default)(a,e,r,n)}},{key:"requestAndReturnBody",value:function(e,t,r,n){return this.request(e,t,r,n).then(function(e){return e.body})}},{key:"requestAndReturnHeader",value:function(e,t,r,n){return this.request(e,t,r).then(function(e){return e.getResponseHeader(n)})}}]),_class}(e)};t.default=a},70:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function(e){return function(e){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,e),n(_class,null,[{key:"updateEntity",value:function(){function updateEntity(t,r,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t,r){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getEntitySetName(e);case 2:return n=i.sent,i.abrupt("return",this.request("PATCH",n+"("+t+")",r));case 4:case"end":return i.stop()}},_callee,this)}));return updateEntity}()}]),_class}(e)};t.default=i},97:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(132),a=_interopRequireDefault(o),u=r(50),s=_interopRequireDefault(u),c=r(133),l=_interopRequireDefault(c),f=r(134),p=_interopRequireDefault(f),y=r(135),h=_interopRequireDefault(y),_=r(41),d=_interopRequireDefault(_),b=r(136),v=_interopRequireDefault(b),g=r(137),m=_interopRequireDefault(g),w=r(18),x=_interopRequireDefault(w),k=function(e){function Entity(e,t){_classCallCheck(this,Entity);var r=_possibleConstructorReturn(this,(Entity.__proto__||Object.getPrototypeOf(Entity)).apply(this,arguments));return r.data=e,r.logicalName=t||r.getClass().logicalName,r}return _inherits(Entity,e),i(Entity,[{key:"getEntityMetadata",value:function(){function getEntityMetadata(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.getEntityDefinitions(this.logicalName);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee,this)}));return getEntityMetadata}()},{key:"getPrimaryIdAttribute",value:function(){function getPrimaryIdAttribute(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getEntityMetadata();case 2:return e=t.sent,t.abrupt("return",e.PrimaryIdAttribute);case 4:case"end":return t.stop()}},_callee2,this)}));return getPrimaryIdAttribute}()},{key:"getPrimaryId",value:function(){function getPrimaryId(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPrimaryIdAttribute();case 2:return e=t.sent,t.abrupt("return",this.data[e]);case 4:case"end":return t.stop()}},_callee3,this)}));return getPrimaryId}()},{key:"getAttribute",value:function(e,t){var r=this.data[t||e];if(r){if(t){var n=this.getClass().getCachedEntityAttributes(this.logicalName),i=n[e],o=d.default.getCachedEntityDefinitions(i.Targets[0]);if(o){var a=o.SchemaName,u=o.PrimaryIdAttribute,s=o.PrimaryNameAttribute;r.LogicalName=a,r.Id=r[u],r.Name=r[s]}}}else{var c=this.logicalName;console.log(c+" has no attribute '"+e+"'")}return r}},{key:"setAttribute",value:function(e,t){if(this.data.hasOwnProperty(e)||e.endsWith("@odata.bind"))if("object"!==n(this.data[e])){var r=this.data[e];r!==t&&(this.data[e]=t,this.changes[e]=t)}else{var i=this.logicalName;console.log(i+" attribute "+e+" is a Lookup. Use systemuser.bind("+e+", "+t+") instead.")}else{var o=this.logicalName;console.log(o+" has no attribute '"+e+"'")}}},{key:"bind",value:function(){function bind(t,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e,t){var r,n,i,o,a,u;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.data.hasOwnProperty(e)){s.next=14;break}return s.next=3,this.getClass().getEntityAttributes(this.logicalName);case 3:return r=s.sent,n=x.default.webAPIPath,i=r[e].Targets[0],s.next=8,d.default.getEntityDefinitions(i);case 8:return o=s.sent,a=o.EntitySetName,u=n+"/"+a+"("+t+")",this.setAttribute(e+"@odata.bind",u),s.next=14,this.updateBinding(e,i,t);case 14:case"end":return s.stop()}},_callee4,this)}));return bind}()},{key:"updateBinding",value:function(){function updateBinding(t,r,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(e,t,r){var n,i,o,a,u,s,c,l,f=this;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:for(n=this.getAttribute(e),i=[],o=!0,a=!1,u=void 0,p.prev=4,s=Object.keys(n)[Symbol.iterator]();!(o=(c=s.next()).done);o=!0)l=c.value,i.push(l);p.next=12;break;case 8:p.prev=8,p.t0=p.catch(4),a=!0,u=p.t0;case 12:p.prev=12,p.prev=13,!o&&s.return&&s.return();case 15:if(p.prev=15,!a){p.next=18;break}throw u;case 18:return p.finish(15);case 19:return p.finish(12);case 20:return p.next=22,Entity.get(t,r,{select:i}).then(function(t){var r=!0,o=!1,a=void 0;try{for(var u,s=i[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var c=u.value;n[c]=t[c]}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}f.setAttribute(e,n)});case 22:case"end":return p.stop()}},_callee5,this,[[4,8,12,20],[13,,15,19]])}));return updateBinding}()},{key:"logicalName",get:function(){return this.logicName},set:function(e){this.logicName=e}},{key:"data",get:function(){return this.dat},set:function(e){this.dat=e}},{key:"isNew",get:function(){return!this.data.hasOwnProperty("@odata.etag")}},{key:"changes",get:function(){return this.chngs||(this.chngs={}),this.chngs},set:function(e){this.chngs=e||{}}}],[{key:"getEntityAttributes",value:function(){function getEntityAttributes(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var e,t,r,n,i,o,a,u,s,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.cachedEntityAttributes||(this.cachedEntityAttributes={}),!this.cachedEntityAttributes[c]){l.next=5;break}return l.abrupt("return",this.cachedEntityAttributes[c]);case 5:return l.next=7,d.default.getEntityDefinitionAttributes(c);case 7:for(e=l.sent,t=e.value,r={},n=!0,i=!1,o=void 0,l.prev=13,a=t[Symbol.iterator]();!(n=(u=a.next()).done);n=!0)s=u.value,r[s.LogicalName]=s;l.next=21;break;case 17:l.prev=17,l.t0=l.catch(13),i=!0,o=l.t0;case 21:l.prev=21,l.prev=22,!n&&a.return&&a.return();case 24:if(l.prev=24,!i){l.next=27;break}throw o;case 27:return l.finish(24);case 28:return l.finish(21);case 29:return this.cachedEntityAttributes[c]=r,l.abrupt("return",r);case 31:case"end":return l.stop()}},_callee6,this,[[13,17,21,29],[22,,24,28]])}));return getEntityAttributes}()},{key:"getCachedEntityAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName;return this.cachedEntityAttributes||(this.cachedEntityAttributes={}),this.cachedEntityAttributes[e]}}]),Entity}((0,a.default)((0,l.default)((0,p.default)((0,h.default)((0,v.default)((0,m.default)(s.default)))))));t.default=k},98:function(e,t,r){"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}return step("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:get(i,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},o=r(97),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function SubEntity(){return _classCallCheck(this,SubEntity),_possibleConstructorReturn(this,(SubEntity.__proto__||Object.getPrototypeOf(SubEntity)).apply(this,arguments))}return _inherits(SubEntity,e),n(SubEntity,null,[{key:"get",value:function(){function get(t,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",i(SubEntity.__proto__||Object.getPrototypeOf(SubEntity),"get",this).call(this,this.logicalName,e,t));case 1:case"end":return r.stop()}},_callee,this)}));return get}()},{key:"query",value:function(){function query(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i(SubEntity.__proto__||Object.getPrototypeOf(SubEntity),"query",this).call(this,this.logicalName,e));case 1:case"end":return t.stop()}},_callee2,this)}));return query}()},{key:"fetch",value:function(){function fetch(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i(SubEntity.__proto__||Object.getPrototypeOf(SubEntity),"fetch",this).call(this,this.logicalName,e));case 1:case"end":return t.stop()}},_callee3,this)}));return fetch}()}]),SubEntity}(a.default);t.default=u}})});