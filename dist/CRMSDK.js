!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("CRMSDK",[],t):"object"==typeof exports?exports.CRMSDK=t():e.CRMSDK=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2);Object.defineProperty(t,"Entity",{enumerable:!0,get:function(){return n(o).default}});var u=r(22);Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return n(u).default}});var i=r(24);Object.defineProperty(t,"Systemuser",{enumerable:!0,get:function(){return n(i).default}});var a=r(7);Object.defineProperty(t,"WebAPI",{enumerable:!0,get:function(){return n(a).default}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(3),l=n(f),p=r(4),h=n(p),y=r(5),v=n(y),d=r(18),b=n(d),g=r(19),m=n(g),w=r(6),x=n(w),_=r(20),O=n(_),k=r(21),P=n(k),j=r(7),E=n(j),R=function(e){function t(e,r){u(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return n.data=e,n.logicalName=r||n.getClass().logicalName,n}return a(t,e),s(t,[{key:"getEntityMetadata",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.default.getEntityDefinitions(this.logicalName);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"getPrimaryIdAttribute",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntityMetadata();case 2:return t=e.sent,e.abrupt("return",t.PrimaryIdAttribute);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"getPrimaryId",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPrimaryIdAttribute();case 2:return t=e.sent,e.abrupt("return",this.data[t]);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"getAttribute",value:function(e){if(this.data.hasOwnProperty(e)){if("object"!==c(this.data[e]))return this.data[e];var t=this.getClass().getCachedEntityAttributes(this.logicalName),r=t[e],n=x.default.getCachedEntityDefinitions(r.Targets[0]),o=this.data[e];if(n){var u=n.SchemaName,i=n.PrimaryIdAttribute,a=n.PrimaryNameAttribute;o.LogicalName=u,o.Id=o[i],o.Name=o[a]}return o}var s=this.logicalName;console.log(s+" has no attribute '"+e+"'")}},{key:"setAttribute",value:function(e,t){if(this.data.hasOwnProperty(e)||e.endsWith("@odata.bind"))if("object"!==c(this.data[e])){var r=this.data[e];r!==t&&(this.data[e]=t,this.changes[e]=t)}else{var n=this.logicalName;console.log(n+" attribute "+e+" is a Lookup. Use systemuser.bind("+e+", "+t+") instead.")}else{var o=this.logicalName;console.log(o+" has no attribute '"+e+"'")}}},{key:"bind",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,o,u,i,a,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.data.hasOwnProperty(t)){e.next=14;break}return e.next=3,this.getClass().getEntityAttributes(this.logicalName);case 3:return n=e.sent,o=E.default.webAPIPath,u=n[t].Targets[0],e.next=8,x.default.getEntityDefinitions(u);case 8:return i=e.sent,a=i.EntitySetName,c=o+"/"+a+"("+r+")",this.setAttribute(t+"@odata.bind",c),e.next=14,this.updateBinding(t,u,r);case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateBinding",value:function(){function e(e,t,n){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r,n,o){var u,i,a,c,s,f,l,p,h=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.getAttribute(r),i=[],a=!0,c=!1,s=void 0,e.prev=4,f=Object.keys(u)[Symbol.iterator]();!(a=(l=f.next()).done);a=!0)p=l.value,i.push(p);e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),c=!0,s=e.t0;case 12:e.prev=12,e.prev=13,!a&&f.return&&f.return();case 15:if(e.prev=15,!c){e.next=18;break}throw s;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,t.get(n,o,{select:i}).then(function(e){var t=!0,n=!1,o=void 0;try{for(var a,c=i[Symbol.iterator]();!(t=(a=c.next()).done);t=!0){var s=a.value;u[s]=e[s]}}catch(e){n=!0,o=e}finally{try{!t&&c.return&&c.return()}finally{if(n)throw o}}h.setAttribute(r,u)});case 22:case"end":return e.stop()}},e,this,[[4,8,12,20],[13,,15,19]])}));return e}()},{key:"logicalName",get:function(){return this.logicName},set:function(e){this.logicName=e}},{key:"data",get:function(){return this.dat},set:function(e){this.dat=e}},{key:"isNew",get:function(){return!this.data.hasOwnProperty("@odata.etag")}},{key:"changes",get:function(){return this.chngs||(this.chngs={}),this.chngs},set:function(e){this.chngs=e||{}}}],[{key:"getEntityAttributes",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n,o,u,i,a,c,s,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cachedEntityAttributes||(this.cachedEntityAttributes={}),!this.cachedEntityAttributes[f]){e.next=5;break}return e.abrupt("return",this.cachedEntityAttributes[f]);case 5:return e.next=7,x.default.getEntityDefinitionAttributes(f);case 7:for(t=e.sent,r=t.value,n={},o=!0,u=!1,i=void 0,e.prev=13,a=r[Symbol.iterator]();!(o=(c=a.next()).done);o=!0)s=c.value,n[s.LogicalName]=s;e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),u=!0,i=e.t0;case 21:e.prev=21,e.prev=22,!o&&a.return&&a.return();case 24:if(e.prev=24,!u){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return this.cachedEntityAttributes[f]=n,e.abrupt("return",n);case 31:case"end":return e.stop()}},e,this,[[13,17,21,29],[22,,24,28]])}));return e}()},{key:"getCachedEntityAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName;return this.cachedEntityAttributes||(this.cachedEntityAttributes={}),this.cachedEntityAttributes[e]}}]),t}((0,l.default)((0,v.default)((0,b.default)((0,m.default)((0,O.default)((0,P.default)(h.default)))))));t.default=R},function(e,t){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,null,[{key:"getQueryAttributes",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,r,n,o,u,i,a,c,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.logicalName;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.extractQueryAttributes(s),0!==t.length){e.next=24;break}return e.next=4,this.getEntityAttributes(f);case 4:for(r=e.sent,n=!0,o=!1,u=void 0,e.prev=8,i=Object.keys(r)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)c=a.value,t.push(c);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),o=!0,u=e.t0;case 16:e.prev=16,e.prev=17,!n&&i.return&&i.return();case 19:if(e.prev=19,!o){e.next=22;break}throw u;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.abrupt("return",t);case 25:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])}));return e}()},{key:"extractQueryAttributes",value:function(e){var t=e.select,r=e.expand,n=void 0===r?[]:r,o=t?t.slice():[],u=!0,i=!1,a=void 0;try{for(var c,s=n[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){var f=c.value;"string"==typeof f?o.push(f):o.push(f.attribute)}}catch(e){i=!0,a=e}finally{try{!u&&s.return&&s.return()}finally{if(i)throw a}}return o}},{key:"parseResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],r=arguments[2],n=[],o=!0,u=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var s=a.value,f=new this(s,t);this.addDescriptors(f,r),n.push(f)}}catch(e){u=!0,i=e}finally{try{!o&&c.return&&c.return()}finally{if(u)throw i}}return n}},{key:"addDescriptors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!0,n=!1,o=void 0;try{for(var u,i=t[Symbol.iterator]();!(r=(u=i.next()).done);r=!0){var a=u.value,c=this.getDescriptor(a);Object.defineProperty(e,a,c)}}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}}},{key:"getDescriptor",value:function(e){var t=this.getPropertyDescriptor(e),r=null;return t&&t.get&&t.set||(r={}),t&&t.get||(r.get=function(){return this.getAttribute(e)}),t&&t.set||(r.set=function(t){this.setAttribute(e,t)}),r}},{key:"getPropertyDescriptor",value:function(e){var t=Object.getOwnPropertyDescriptor(this.prototype,e),r=void 0;for(t||(r=Object.getPrototypeOf(this.prototype));!t&&r;)t=Object.getOwnPropertyDescriptor(r,e),r=Object.getPrototypeOf(r);return t}}]),t}(e)};t.default=a},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){r(this,e)}return n(e,[{key:"getClass",value:function(){return Object.getPrototypeOf(this).constructor}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(6),f=n(s),l=r(7),p=n(l),h=function(e){return function(e){function t(){return u(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"create",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getClass().create(this.logicalName,this.data));case 1:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"create",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,o,u,i,a,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getEntityDefinitions(t);case 2:return n=e.sent,o=[],console.log("Create "+t),e.next=7,p.default.createEntity(t,r);case 7:for(r[n.PrimaryIdAttribute]=e.sent,u=!0,i=!1,a=void 0,e.prev=11,c=Object.keys(r)[Symbol.iterator]();!(u=(s=c.next()).done);u=!0)l=s.value,o.push(l);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),i=!0,a=e.t0;case 19:e.prev=19,e.prev=20,!u&&c.return&&c.return();case 22:if(e.prev=22,!i){e.next=25;break}throw a;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.abrupt("return",this.parseResult([r],t,o)[0]);case 28:case"end":return e.stop()}},e,this,[[11,15,19,27],[20,,22,26]])}));return e}()}]),t}(e)};t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(7),c=n(a),s=function(){function e(){u(this,e)}return i(e,null,[{key:"getEntityDefinitions",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cachedEntityDefinitions[t]){e.next=2;break}return e.abrupt("return",Promise.resolve(this.cachedEntityDefinitions[t]));case 2:if("string"==typeof t){e.next=4;break}throw Error("Invalid logicalName given");case 4:return e.next=6,c.default.retrieveEntitySet("EntityDefinitions",{LogicalName:t});case 6:return r=e.sent,this.cachedEntityDefinitions[t]=r,e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"getCachedEntityDefinitions",value:function(e){return this.cachedEntityDefinitionAttributes[e]}},{key:"getEntityDefinitionAttributes",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cachedEntityDefinitionAttributes[t]){e.next=2;break}return e.abrupt("return",Promise.resolve(this.cachedEntityDefinitionAttributes[t]));case 2:return e.next=4,c.default.retrieveEntitySetProperty("EntityDefinitions",{LogicalName:t},"Attributes");case 4:return r=e.sent,this.cachedEntityDefinitionAttributes[t]=r,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"cachedEntityDefinitions",get:function(){return this.entityDef||(this.entityDef={}),this.entityDef}},{key:"cachedEntityDefinitionAttributes",get:function(){return this.entityDefAttributes||(this.entityDefAttributes={}),this.entityDefAttributes}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(8),l=n(f),p=r(9),h=n(p),y=r(4),v=n(y),d=r(10),b=n(d),g=r(11),m=n(g),w=r(12),x=n(w),_=r(6),O=n(_),k=r(13),P=n(k),j=r(14),E=n(j),R=r(16),S=n(R),A=r(17),T=n(A),N=function(e){function t(){return u(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,null,[{key:"getEntitySetName",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.default.getEntityDefinitions(t);case 2:return r=e.sent,e.abrupt("return",r.EntitySetName);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"retrieveEntitySetProperty",value:function(){function e(e,t,n,o){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r,n,o,u){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.buildQueryString(u),a=t.parseEntityId(n),e.abrupt("return",t.requestAndReturnBody("GET",r+"("+a+")/"+o+i));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"parseEntityId",value:function(e){var t=e;if("object"===("undefined"==typeof e?"undefined":c(e))){var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(n+"='"+e[n]+"'");t=r.join(",")}return t}},{key:"requestNextLinks",value:function(e){var r=this,n=[];return t.requestAndReturnBody("GET",e).then(function(){var e=o(regeneratorRuntime.mark(function e(o){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.value,!o["@odata.nextLink"]){e.next=7;break}return e.t0=n,e.next=5,t.requestNextLinks(o["@odata.nextLink"]);case 5:e.t1=e.sent,n=e.t0.concat.call(e.t0,e.t1);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}())}},{key:"buildQueryString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if("string"==typeof e)t.push(e);else if(e.select){var r=void 0;r="object"===c(e.select)?e.select.join(","):e.select,t.push("$select="+r)}return t.length?"?"+t.join("&"):""}},{key:"context",get:function(){if("undefined"!=typeof window.Xrm)return window.Xrm.Page.context;if("undefined"!=typeof window.GetGlobalContext)return window.GetGlobalContext();throw new Error("Context is not available.")}},{key:"webAPIPath",get:function(){var e=this.context.getClientUrl(),t=this.version;return e+"/api/data/"+t}},{key:"version",get:function(){return this.api||S.default.api},set:function(e){e.startsWith("v")||(e="v"+e),this.api=e}}]),t}((0,l.default)((0,h.default)((0,b.default)((0,m.default)((0,x.default)((0,P.default)((0,E.default)((0,T.default)(v.default)))))))));t.default=N},function(e,t){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,null,[{key:"executeAction",value:function(){function e(e,r,n,o){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,r,n,o){var u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return e.abrupt("return",this.executeBoundAction.apply(this,u));case 4:return e.abrupt("return",this.executeUnboundAction.apply(this,u));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"executeBoundAction",value:function(){function e(e,r,n,o){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,r,n,o){var u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntitySetName(n);case 2:return u=e.sent,e.abrupt("return",this.requestAndReturnBody("POST",u+"("+o+")/Microsoft.Dynamics.CRM."+t,r));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"executeUnboundAction",value:function(e,t){return this.requestAndReturnBody("POST",""+e,t)}}]),t}(e)};t.default=a},function(e,t){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,null,[{key:"associateEntities",value:function(){function e(e,r,n,o,u){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,r,n,o,u){var i,a,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntitySetName(t);case 2:return i=e.sent,a=this.webAPIPath,c={"@odata.id":a+"/"+o+"("+u+")"},e.abrupt("return",this.requestAndReturnBody("POST",i+"("+r+")/"+n+"/$ref",c));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"disassociateEntities",value:function(){function e(e,r,n,o){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,r,n,o){var u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntitySetName(t);case 2:return u=e.sent,e.abrupt("return",this.requestAndReturnBody("DELETE",u+"("+r+")/"+n+"("+o+")/$ref"));case 4:case"end":return e.stop()}},e,this)}));return e}()}]),t}(e)};t.default=a},function(e,t){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,null,[{key:"createEntity",value:function(){function e(e,r){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,r){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntitySetName(t);case 2:return n=e.sent,e.next=5,this.requestAndReturnHeader("POST",n,r,"OData-EntityId");case 5:if(o=e.sent,!o){e.next=8;break}return e.abrupt("return",this.getEntityIdFromHeader(o));case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"getEntityIdFromHeader",value:function(e){var t=/\(([^)]+)\)/,r=t.exec(e);return r[1]}}]),t}(e)};t.default=a},function(e,t){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,null,[{key:"deleteEntity",value:function(){function e(e,r){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntitySetName(t);case 2:return n=e.sent,e.abrupt("return",this.request("DELETE",n+"("+r+")"));case 4:case"end":return e.stop()}},e,this)}));return e}()}]),t}(e)};t.default=a},function(e,t){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,null,[{key:"executeFunction",value:function(e,t,r){return t?this.executeBoundFunction.apply(this,arguments):this.executeUnboundFunction.apply(this,arguments)}},{key:"executeBoundFunction",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntitySetName(r);case 2:return o=e.sent,e.abrupt("return",this.requestAndReturnBody("GET",o+"("+n+")/Microsoft.Dynamics.CRM."+t));
    case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"executeUnboundFunction",value:function(e){return this.requestAndReturnBody("GET",""+e)}}]),t}(e)};t.default=a},function(e,t){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,null,[{key:"retrieveEntity",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntitySetName(t);case 2:return o=e.sent,e.abrupt("return",this.retrieveEntitySet(o,r,n));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"retrieveEntitySet",value:function(e,t,r){var n=this.buildQueryString(r),o=t?this.parseEntityId(t):null,u=""+e;return o&&(u+="("+o+")"),u+=""+n,this.requestAndReturnBody("GET",u)}},{key:"retrieveMultiple",value:function(){function e(e,r){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var o,u,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntitySetName(t);case 2:return o=e.sent,u=this.buildQueryString(n),e.abrupt("return",this.requestAndReturnBody("GET",""+o+u).then(function(){var e=r(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t["@odata.nextLink"]){e.next=6;break}return e.next=3,i.requestNextLinks(t["@odata.nextLink"]);case 3:r=e.sent,t.value=t.value.concat(r),delete t["@odata.nextLink"];case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"executeFetchXml",value:function(){function e(e,r){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var o,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntitySetName(t);case 2:return o=e.sent,e.abrupt("return",this.requestAndReturnBody("GET",o+"?fetchXml="+n).then(function(){var e=r(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t["@odata.nextLink"]){e.next=6;break}return e.next=3,u.requestNextLinks(t["@odata.nextLink"]);case 3:r=e.sent,t.value=t.value.concat(r),delete t["@odata.nextLink"];case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e,u)}));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}},e,this)}));return e}()}]),t}(e)};t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(15),s=n(c),f=function(e){return function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,null,[{key:"request",value:function(e,t,r,n){var o=this.webAPIPath,u=void 0;return u=0===t.indexOf("http")?t:o+"/"+t,(0,s.default)(u,e,r,n)}},{key:"requestAndReturnBody",value:function(e,t,r,n){return this.request(e,t,r,n).then(function(e){return e.body})}},{key:"requestAndReturnHeader",value:function(e,t,r,n){return this.request(e,t,r).then(function(e){return e.getResponseHeader(n)})}}]),t}(e)};t.default=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["DELETE","GET","PATCH","POST","PUT"],n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(function(i,a){var c=new XMLHttpRequest;if(r.indexOf(t)===-1)throw new Error("Request method must be one of the following: "+r.join(", "));c.open(t,encodeURI(e),!0),c.setRequestHeader("OData-MaxVersion","4.0"),c.setRequestHeader("OData-Version","4.0"),c.setRequestHeader("Accept","application/json"),c.setRequestHeader("Content-Type","application/json; charset=utf-8");for(var s in o)XMLHttpRequest.setRequestHeader(s,o[s]);c.onreadystatechange=function(){4===c.readyState&&(c.onreadystatechange=null,u(c).then(i).catch(a))},c.send(JSON.stringify(n))})},o=function(e,t){if("string"==typeof t){var r=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?::(\d*))?Z$/.exec(t);if(r)return new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6],+r[7]))}return t},u=function(e){return new Promise(function(t,r){var n=[{status:[200],handler:function(){var n=null,u=e.response;try{n=JSON.parse(u,o)}catch(e){return void r(new Error("JSON response can't be parsed"))}t({body:n,getResponseHeader:e.getResponseHeader.bind(e),statusCode:e.status})}},{status:[204],handler:function(){var r=null;t({body:r,getResponseHeader:e.getResponseHeader.bind(e),statusCode:e.status})}}],u=function(){var t=void 0;try{t=JSON.parse(e.response).error}catch(e){t=new Error("Unexpected Error")}r(t)},i=n.find(function(t){if(t.status.indexOf(e.status)>-1)return!0});i?i.handler():u()})};t.default=n},function(e,t){e.exports={api:"v8.0"}},function(e,t){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,null,[{key:"updateEntity",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEntitySetName(t);case 2:return o=e.sent,e.abrupt("return",this.request("PATCH",o+"("+r+")",n));case 4:case"end":return e.stop()}},e,this)}));return e}()}]),t}(e)};t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(7),f=n(s),l=function(e){return function(e){function t(){return u(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"delete",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPrimaryId();case 2:return t=e.sent,r=this.logicalName,console.log("Delete "+r+" ("+t+")"),e.abrupt("return",f.default.deleteEntity(r,t));case 6:case"end":return e.stop()}},e,this)}));return e}()}]),t}(e)};t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(7),f=n(s),l=function(e){return function(e){function t(){return u(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,null,[{key:"fetch",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName,o=arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetch "+n+" "+o),e.next=3,f.default.executeFetchXml(n,o);case 3:return t=e.sent,e.next=6,this.getQueryAttributes(void 0,n);case 6:return r=e.sent,e.abrupt("return",this.parseResult(t.value,n,r));case 8:case"end":return e.stop()}},e,this)}));return e}()}]),t}(e)};t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(6),f=n(s),l=r(7),p=n(l),h=function(e){return function(e){function t(){return u(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,null,[{key:"get",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName,u=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getQueryOptions(i,o);case 2:return t=e.sent,u&&i.filters&&console.log("Get by 'id' does negate filters on query"),console.log("Get "+o+" ("+u+") "+t),e.next=7,p.default.retrieveEntity(o,u,t);case 7:return r=e.sent,e.next=10,this.getQueryAttributes(i,o);case 10:return n=e.sent,e.abrupt("return",this.parseResult(r.value?r.value:[r],o,n)[0]);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"query",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logicalName,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getQueryOptions(u,o);case 2:return t=e.sent,console.log("Query "+o),e.next=6,p.default.retrieveMultiple(o,t);case 6:return r=e.sent,e.next=9,this.getQueryAttributes(u,o);case 9:return n=e.sent,e.abrupt("return",this.parseResult(r.value,o,n));case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"rewriteFilters",value:function(e){var t={type:"and",conditions:[]};e.filters||(e.filters=[]);for(var r in e)e.hasOwnProperty(r)&&this.queryElements.indexOf(r)===-1&&t.conditions.push({attribute:r.toLowerCase(),operator:"eq",value:e[r]});t.conditions.length>0&&e.filters.push(t)}},{key:"rewriteSelect",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,o,u,i,a,c,s,l,p,h,y,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.select){e.next=42;break}return e.next=3,this.getEntityAttributes(r);case 3:n=e.sent,o=t.select.slice(),u=!0,i=!1,a=void 0,e.prev=8,c=o[Symbol.iterator]();case 10:if(u=(s=c.next()).done){e.next=28;break}if(l=s.value,p=n[l],h=p&&p.AttributeType,"Lookup"!==h){e.next=23;break}return e.next=16,f.default.getEntityDefinitions(p.Targets[0]);case 16:y=e.sent,v=t.select.indexOf(l),t.select.splice(v,1),t.expand||(t.expand=[]),t.expand.push({attribute:l,select:[y.PrimaryIdAttribute,y.PrimaryNameAttribute]}),e.next=25;break;case 23:if(h){e.next=25;break}throw"Unexisting select field found: "+l;case 25:u=!0,e.next=10;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(8),i=!0,a=e.t0;case 34:e.prev=34,e.prev=35,!u&&c.return&&c.return();case 37:if(e.prev=37,!i){e.next=40;break}throw a;case 40:return e.finish(37);case 41:return e.finish(34);case 42:case"end":return e.stop()}},e,this,[[8,30,34,42],[35,,37,41]])}));return e}()},{key:"getQueryOptions",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,o,u,i,a,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"&";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.rewriteFilters(t),e.next=3,this.rewriteSelect(t,r);case 3:return n=[],o=this.parseSelect(t.select),e.next=7,this.parseFilters(t.filters,r);case 7:return u=e.sent,e.next=10,this.parseExpand(t.expand,r);case 10:return i=e.sent,a=this.parseOrders(t.orders),u&&n.push(u),o&&n.push(o),i&&n.push(i),a&&n.push(a),e.abrupt("return",n.join(c));case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"parseExpand",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n,o,u,i,a,c,s,f,l,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],h=arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,!(p.length>0)){e.next=41;break}r="",n=!0,o=!1,u=void 0,e.prev=6,i=p[Symbol.iterator]();case 8:if(n=(a=i.next()).done){e.next=26;break}if(c=a.value,""!==r&&(r+=","),"string"!=typeof c){e.next=15;break}r+=""+c,e.next=23;break;case 15:return s=c.attribute,e.next=18,this.getEntityAttributes(h);case 18:return f=e.sent,e.next=21,this.getQueryOptions(c,f[s].Targets[0],";");case 21:l=e.sent,r+=s+"("+l+")";case 23:n=!0,e.next=8;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(6),o=!0,u=e.t0;case 32:e.prev=32,e.prev=33,!n&&i.return&&i.return();case 35:if(e.prev=35,!o){e.next=38;break}throw u;case 38:return e.finish(35);case 39:return e.finish(32);case 40:t="$expand="+r;case 41:return e.abrupt("return",t);case 42:case"end":return e.stop()}},e,this,[[6,28,32,40],[33,,35,39]])}));return e}()},{key:"parseSelect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=null;if(e.length>0){var r="",n=!0,o=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;""!==r&&(r+=","),r+=""+c}}catch(e){o=!0,u=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw u}}t="$select="+r}return t}},{key:"parseFilters",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n,o,u,i,a,c,s,f,l,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],h=arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,!(p.length>0)){e.next=39;break}r=[],n=!0,o=!1,u=void 0,e.prev=6,i=p[Symbol.iterator]();case 8:if(n=(a=i.next()).done){e.next=24;break}return c=a.value,s=c.type,f=c.conditions,e.t0=r,e.next=14,this.parseConditions(f,s,h);case 14:if(e.t1=e.sent,e.t0.push.call(e.t0,e.t1),!c.filters){e.next=21;break}return e.next=19,this.parseFilters(c.filters,h);case 19:l=e.sent,r.push(l.substring(8));case 21:n=!0,e.next=8;break;case 24:e.next=30;break;case 26:e.prev=26,e.t2=e.catch(6),o=!0,u=e.t2;case 30:e.prev=30,e.prev=31,!n&&i.return&&i.return();case 33:if(e.prev=33,!o){e.next=36;break}throw u;case 36:return e.finish(33);case 37:return e.finish(30);case 38:t="$filter="+r.join("and");case 39:return e.abrupt("return",t);case 40:case"end":return e.stop()}},e,this,[[6,26,30,38],[31,,33,37]])}));return e}()},{key:"parseConditions",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n,o,u,i,a,c,s,f,l,p,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and",v=arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,this.getEntityAttributes(v);case 3:for(r=e.sent,n=!0,o=!1,u=void 0,e.prev=7,i=h[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)c=a.value,s=c.attribute,f=c.operator,l=c.value,p=r[s].AttributeType,f=f||"eq",l="String"===p?"'"+l+"'":""+l,""!==t&&(t+=" "+y+" "),t+=s+" "+f+" "+l;e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),o=!0,u=e.t0;case 15:e.prev=15,e.prev=16,!n&&i.return&&i.return();case 18:if(e.prev=18,!o){e.next=21;break}throw u;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.abrupt("return","("+t+")");case 24:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])}));return e}()},{key:"parseOrders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=null;if(e.length>0){var r="",n=!0,o=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value,s=c.attribute,f=c.descending,l=f?"desc":"asc";""!==r&&(r+=","),r+=s+" "+l}}catch(e){o=!0,u=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw u}}t="$orderby="+r}return t}},{key:"queryElements",get:function(){return["attribute","filters","select","expand","orders"]}}]),t}(e)};t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(7),f=n(s),l=function(e){return function(e){function t(){return u(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"save",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isNew){e.next=4;break}return e.abrupt("return",this.create());case 4:if(0===Object.keys(this.changes).length){e.next=6;break}return e.abrupt("return",this.update());case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"update",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.changes,e.next=3,this.getPrimaryId();case 3:return r=e.sent,n=this.logicalName,console.log("Update "+n+" ("+r+")"),e.next=8,f.default.updateEntity(n,r,t);case 8:this.changes=null;case 9:case"end":return e.stop()}},e,this)}));return e}()}]),t}(e)};t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(23),s=n(c),f=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,null,[{key:"getActiveAccounts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filters||(e.filters=[]),e.filters.push(this.activeFilter),this.query(e)}},{key:"logicalName",get:function(){return"account"}},{key:"activeFilter",get:function(){return{type:"and",conditions:[{attribute:"statecode",value:0}]}}}]),t}(s.default);t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(e){return void r(e)}return i.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},f=r(2),l=n(f),p=function(e){function t(){return u(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,null,[{key:"get",value:function(){function e(e,t){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s(t.__proto__||Object.getPrototypeOf(t),"get",this).call(this,this.logicalName,r,n));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"query",value:function(){function e(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s(t.__proto__||Object.getPrototypeOf(t),"query",this).call(this,this.logicalName,r));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"fetch",value:function(){function e(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s(t.__proto__||Object.getPrototypeOf(t),"fetch",this).call(this,this.logicalName,r));case 1:case"end":return e.stop()}},e,this)}));return e}()}]),t}(l.default);t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(23),s=n(c),f=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,null,[{key:"getCurrent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filters||(e.filters=[]),e.filters.push(this.currentFilter),this.get(null,e)}},{key:"logicalName",get:function(){return"systemuser"}},{key:"currentFilter",get:function(){return{type:"and",conditions:[{attribute:"systemuserid",value:this.userId}]}}},{key:"userId",get:function(){var e=window.Xrm.Page.context.getUserId();return e.slice(1,e.length-1)}}]),t}(s.default);t.default=f}])});
